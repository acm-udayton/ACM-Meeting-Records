<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Meeting Details | ACM Meetings</title>
        <meta name="author" content="Joseph Lefkovitz">
        <meta name="description" content="">
        <meta name="keywords" content="">

        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

        <!-- Custom Stylesheet -->
         <link href="base.css" rel="stylesheet">
    </head>
    <body class="row align-items-center">
        <header id="header" class="header d-flex align-items-center fixed-top">
            <div class="container-fluid container-xl position-relative d-flex align-items-center">
            <div class="logo d-flex align-items-center">
                <h1 class="page-title">ACM Attendance</h1>
            </div>
            </div>
        </header>
        <main class="main">
            <div>
                <div class="col-12 center-row">
                    <h2>Meeting ID:</h2>
                    <br />
                    <div class="d-flex align-items-stretch input-box">
                        <input disabled id="meeting-id" type="text" class="form-control">
                        <button onclick="copyId()" class="btn btn-primary" >Copy</button>
                    </div>
                </div>
                <div class="col-12 center-row">
                    <br />
                    <br />
                    <h2>Meeting Code:</h2>
                    <br />
                    <div class="d-flex align-items-stretch input-box">
                        <input disabled id="meeting-code" type="text" class="form-control">
                        <button onclick="copyCode()" class="btn btn-primary" >Copy</button>
                    </div>
                </div>
            </div>
            <div id="broken-link-warn" class="col-12 center-row" style="display: none;">
                <br/>Not seeing anything?
                <br/>The link you followed may be broken, please try again or reach out for help!
            </div>
        </main>
        <script>
            function copyId() {
                var copyText = document.getElementById("meeting-id");
                copyText.select();
                copyText.setSelectionRange(0, 99999); // For mobile devices
                navigator.clipboard.writeText(copyText.value);
            }
            function copyCode() {
                var copyText = document.getElementById("meeting-code");
                copyText.select();
                copyText.setSelectionRange(0, 99999); // For mobile devices
                navigator.clipboard.writeText(copyText.value);
            }
            const currentURL = window.location.href;
            const urlObject = new URL(currentURL);    
            const params = new URLSearchParams(urlObject.search);
            const urlId = params.get('id');
            const urlCode = params.get('code');
            if (urlId != null && urlCode != null) {
                document.getElementById("meeting-id").value = urlId;
                document.getElementById("meeting-code").value = urlCode;
            }
            else {
                document.getElementById("broken-link-warn").style.display = "block";
            }
        </script>
    </body>
</html>